@using WebApp.Models;

<div id="game" class="center answer">
    <h1 class="answer-title">@Question.Prompt</h1>
    <div class="answer-grid">
        @for (int i = 0; i < Question.Answers.Count; i++)
        {
            <div class="answer-item" style="@(FlippedAnswers[i] ? "Background-color:red" : "")">
                <p class="answer-id">#@(i + 1)</p>
                <div>
                    <p>@(FlippedAnswers[i] ? Question.Answers[i].Text : "???")</p>
                    <p>@(FlippedAnswers[i] ? Question.Answers[i].Points : "")</p>
                </div>
            </div>
        }
    </div>
    <input type="text" value="@Text" @onchange="this.OnChange" />
    <button @onclick="CheckAnswer">Send</button>
</div>


@code {
    [Parameter]
    public Question<Answer>? Question { get; set; }
    [Parameter]
    public EventCallback<string> Answer { get; set; }
    [Parameter]
    public bool[] FlippedAnswers { get; set; }
    public string Text { get; set; }

    public void OnChange(ChangeEventArgs e)
    {
        Text = e.Value.ToString();
    }

    public async Task CheckAnswer()
    {
        await Answer.InvokeAsync(Text);
    }
}
